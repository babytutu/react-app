(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{1665:function(e,t,n){Promise.resolve().then(n.bind(n,8126))},8126:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(9268),r=n(5333);async function i(e,t){return await fetch(e,{body:t&&JSON.stringify(t),method:"POST",headers:{"content-type":"application/json; charset=utf-8"}}).then(e=>e.json())}var l=n(6006);function s(){let e={name:"",age:18},[t,n]=(0,l.useState)([]),[s,c]=(0,l.useState)(!1),[o]=r.l0.useForm(),[d,u]=(0,l.useState)("");(0,l.useEffect)(()=>{h()},[]);let h=()=>{i("https://87tetwnrqe.hk.aircode.run/getItem").then(e=>{let{success:t,result:a}=e;t&&n(a||[])})},m=async()=>{if(s)return;let t=o.getFieldsValue();c(!0);let{success:n}=await i("https://87tetwnrqe.hk.aircode.run/".concat(d?"editItem":"addItem"),d?{id:d,data:t}:t);c(!1),n&&(r.Vq.alert({content:"操作成功"}),h()),u(""),o.setFieldsValue(e)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.l0,{layout:"horizontal",form:o,onFinish:m,onFinishFailed:()=>{r.Vq.alert({content:"输入验证失败"})},initialValues:e,footer:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.zx,{block:!0,loading:s,type:"submit",color:"primary",size:"large",children:d?"修改":"新增"})}),children:[(0,a.jsx)(r.l0.Header,{children:"表单提交"}),(0,a.jsx)(r.l0.Item,{name:"name",label:"姓名",rules:[{required:!0,message:"姓名不能为空"}],children:(0,a.jsx)(r.II,{placeholder:"请输入姓名",clearable:!0})}),(0,a.jsx)(r.l0.Item,{name:"age",label:"年龄",rules:[{required:!0,message:"年龄不能为空"}],children:(0,a.jsx)(r.vF,{max:999})})]}),(0,a.jsx)(r.aV,{children:t&&t.map(t=>(0,a.jsx)(r.Y,{rightActions:[{key:"mute",text:"编辑",color:"warning",onClick:()=>{o.setFieldsValue({name:t.name,age:t.age}),u(t._id)}},{key:"delete",text:"删除",color:"danger",onClick:()=>{u(""),o.setFieldsValue(e),r.Vq.confirm({content:"确定要删除吗？"}).then(e=>{e&&i("https://87tetwnrqe.hk.aircode.run/removeItem",{id:t._id}).then(e=>{e.success&&(r.Vq.alert({content:"操作成功"}),h())})})}}],children:(0,a.jsx)(r.aV.Item,{extra:t.age,children:t.name})},t._id))}),e.name]})}}},function(e){e.O(0,[63,253,488,744],function(){return e(e.s=1665)}),_N_E=e.O()}]);