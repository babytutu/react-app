(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{6484:function(e,t,n){Promise.resolve().then(n.bind(n,9644))},9644:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(7437),s=n(4592),i=n(4548),l=n.n(i);async function a(e,t){return await fetch(e,{body:t&&JSON.stringify(t),method:"POST",headers:{"content-type":"application/json; charset=utf-8"}}).then(e=>e.json())}var c=n(2265),o=n(4146),u=n(5567);function d(){let e=(0,o.C)(e=>e.form),[t,n]=(0,c.useState)([]),[i,d]=(0,c.useState)(!1),[h]=s.l0.useForm(),[m,f]=(0,c.useState)(""),[x,p]=(0,c.useState)(!0),j=new Date;(0,c.useEffect)(()=>{y()},[]);let y=()=>{a("https://5ykenqzacs.hk.aircode.run/getAllList",{type:"test"}).then(e=>{let{success:t,result:r}=e;t&&n(r||[]),p(!1)})},g=async()=>{if(i)return;let t=h.getFieldsValue(),n={...t,time:l()(t.time).format("YYYY/MM/DD")};d(!0);let{success:r}=await a("https://5ykenqzacs.hk.aircode.run/".concat(m?"editItem":"addItem"),{id:m,data:n,type:"test"});d(!1),r&&(s.FN.show("操作成功"),y()),f(""),h.setFieldsValue(e)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.l0,{layout:"horizontal",form:h,onFinish:g,onFinishFailed:()=>{s.FN.show("输入验证失败")},initialValues:e,footer:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.zx,{block:!0,loading:i,type:"submit",color:"primary",size:"large",children:m?"修改":"新增"})}),children:[(0,r.jsx)(s.l0.Header,{children:"简易账本"}),(0,r.jsx)(s.l0.Item,{name:"type",label:"类型",rules:[{required:!0,message:"类型不能为空"}],children:(0,r.jsx)(s.Y8.Group,{children:(0,r.jsxs)(s.T,{children:[(0,r.jsx)(s.Y8,{value:"购物",children:"购物"}),(0,r.jsx)(s.Y8,{value:"美食",children:"美食"}),(0,r.jsx)(s.Y8,{value:"理发",children:"理发"})]})})}),(0,r.jsx)(s.l0.Item,{name:"time",label:"时间",trigger:"onConfirm",rules:[{required:!0,message:"时间不能为空"}],onClick:(e,t)=>{var n;null===(n=t.current)||void 0===n||n.open()},children:(0,r.jsx)(s.Mt,{max:j,children:e=>e?l()(e).format("YYYY/MM/DD"):"请选择日期"})}),(0,r.jsx)(s.l0.Item,{name:"cost",label:"金额",rules:[{required:!0,message:"金额不能为空"}],children:(0,r.jsx)(s.II,{placeholder:"请输入金额",type:"number",clearable:!0})}),(0,r.jsx)(s.l0.Item,{name:"content",label:"说明",children:(0,r.jsx)(s.II,{placeholder:"请输入说明",clearable:!0})})]}),(0,r.jsx)(u.G,{loading:x,isEmpty:0===t.length}),t.length>0&&(0,r.jsx)(s.aV,{children:t.map(t=>(0,r.jsx)(s.Y,{rightActions:[{key:"mute",text:"编辑",color:"warning",onClick:()=>{h.setFieldsValue({type:t.type,time:new Date(t.time),cost:t.cost,content:t.content}),f(t._id)}},{key:"delete",text:"删除",color:"danger",onClick:()=>{f(""),h.setFieldsValue(e),s.Vq.confirm({content:"确定要删除吗？"}).then(e=>{e&&a("https://5ykenqzacs.hk.aircode.run/removeItem",{id:t._id,type:"test"}).then(e=>{e.success&&(s.FN.show("操作成功"),y())})})}}],children:(0,r.jsx)(s.aV.Item,{extra:t.cost,description:t.content,title:t.time,children:t.type})},t._id))})]})}},4146:function(e,t,n){"use strict";n.d(t,{C:function(){return i},T:function(){return s}});var r=n(3198);let s=r.I0,i=r.v9},5567:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r=n(7437),s=n(4592);function i(e){let{loading:t,isEmpty:n}=e;return(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsx)(s.k_,{}),!t&&n&&(0,r.jsx)(s.iE,{status:"empty"})]})}}},function(e){e.O(0,[864,198,971,596,744],function(){return e(e.s=6484)}),_N_E=e.O()}]);