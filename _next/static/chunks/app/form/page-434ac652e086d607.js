(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{1665:function(e,t,n){Promise.resolve().then(n.bind(n,5676))},5676:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(9268),s=n(292);async function i(e,t){return await fetch(e,{body:t&&JSON.stringify(t),method:"POST",headers:{"content-type":"application/json; charset=utf-8"}}).then(e=>e.json())}var a=n(6006),l=n(2583),c=n(329);function o(){let e=(0,l.C)(e=>e.form),[t,n]=(0,a.useState)([]),[o,u]=(0,a.useState)(!1),[d]=s.l0.useForm(),[h,m]=(0,a.useState)(""),[f,x]=(0,a.useState)(!0);(0,a.useEffect)(()=>{g()},[]);let g=()=>{i("https://87tetwnrqe.hk.aircode.run/getItem").then(e=>{let{success:t,result:r}=e;t&&n(r||[]),x(!1)})},j=async()=>{if(o)return;let t=d.getFieldsValue();u(!0);let{success:n}=await i("https://87tetwnrqe.hk.aircode.run/".concat(h?"editItem":"addItem"),h?{id:h,data:t}:t);u(!1),n&&(s.FN.show("操作成功"),g()),m(""),d.setFieldsValue(e)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.l0,{layout:"horizontal",form:d,onFinish:j,onFinishFailed:()=>{s.FN.show("输入验证失败")},initialValues:e,footer:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.zx,{block:!0,loading:o,type:"submit",color:"primary",size:"large",children:h?"修改":"新增"})}),children:[(0,r.jsx)(s.l0.Header,{children:"表单提交"}),(0,r.jsx)(s.l0.Item,{name:"name",label:"姓名",rules:[{required:!0,message:"姓名不能为空"}],children:(0,r.jsx)(s.II,{placeholder:"请输入姓名",clearable:!0})}),(0,r.jsx)(s.l0.Item,{name:"age",label:"年龄",rules:[{required:!0,message:"年龄不能为空"}],children:(0,r.jsx)(s.vF,{max:999})})]}),(0,r.jsx)(c.G,{loading:f,isEmpty:0===t.length}),t.length>0&&(0,r.jsx)(s.aV,{children:t.map(t=>(0,r.jsx)(s.Y,{rightActions:[{key:"mute",text:"编辑",color:"warning",onClick:()=>{d.setFieldsValue({name:t.name,age:t.age}),m(t._id)}},{key:"delete",text:"删除",color:"danger",onClick:()=>{m(""),d.setFieldsValue(e),s.Vq.confirm({content:"确定要删除吗？"}).then(e=>{e&&i("https://87tetwnrqe.hk.aircode.run/removeItem",{id:t._id}).then(e=>{e.success&&(s.FN.show("操作成功"),g())})})}}],children:(0,r.jsx)(s.aV.Item,{extra:t.age,children:t.name})},t._id))})]})}},2583:function(e,t,n){"use strict";n.d(t,{C:function(){return i},T:function(){return s}});var r=n(6628);let s=r.I0,i=r.v9},329:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r=n(9268),s=n(292);function i(e){let{loading:t,isEmpty:n}=e;return(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsx)(s.k_,{}),!t&&n&&(0,r.jsx)(s.iE,{status:"empty"})]})}}},function(e){e.O(0,[133,628,253,769,744],function(){return e(e.s=1665)}),_N_E=e.O()}]);