(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{1665:function(e,t,n){Promise.resolve().then(n.bind(n,8126))},8126:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(9268),a=n(1086);async function i(e,t){return await fetch(e,{body:t&&JSON.stringify(t),method:"POST",headers:{"content-type":"application/json; charset=utf-8"}}).then(e=>e.json())}var l=n(6006),s=n(5738);function c(){let e=(0,s.C)(e=>e.form),[t,n]=(0,l.useState)([]),[c,o]=(0,l.useState)(!1),[u]=a.l0.useForm(),[d,h]=(0,l.useState)("");(0,l.useEffect)(()=>{m()},[]);let m=()=>{i("https://87tetwnrqe.hk.aircode.run/getItem").then(e=>{let{success:t,result:r}=e;t&&n(r||[])})},f=async()=>{if(c)return;let t=u.getFieldsValue();o(!0);let{success:n}=await i("https://87tetwnrqe.hk.aircode.run/".concat(d?"editItem":"addItem"),d?{id:d,data:t}:t);o(!1),n&&(a.Vq.alert({content:"操作成功"}),m()),h(""),u.setFieldsValue(e)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.l0,{layout:"horizontal",form:u,onFinish:f,onFinishFailed:()=>{a.Vq.alert({content:"输入验证失败"})},initialValues:e,footer:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.zx,{block:!0,loading:c,type:"submit",color:"primary",size:"large",children:d?"修改":"新增"})}),children:[(0,r.jsx)(a.l0.Header,{children:"表单提交"}),(0,r.jsx)(a.l0.Item,{name:"name",label:"姓名",rules:[{required:!0,message:"姓名不能为空"}],children:(0,r.jsx)(a.II,{placeholder:"请输入姓名",clearable:!0})}),(0,r.jsx)(a.l0.Item,{name:"age",label:"年龄",rules:[{required:!0,message:"年龄不能为空"}],children:(0,r.jsx)(a.vF,{max:999})})]}),(0,r.jsx)(a.aV,{children:t&&t.map(t=>(0,r.jsx)(a.Y,{rightActions:[{key:"mute",text:"编辑",color:"warning",onClick:()=>{u.setFieldsValue({name:t.name,age:t.age}),h(t._id)}},{key:"delete",text:"删除",color:"danger",onClick:()=>{h(""),u.setFieldsValue(e),a.Vq.confirm({content:"确定要删除吗？"}).then(e=>{e&&i("https://87tetwnrqe.hk.aircode.run/removeItem",{id:t._id}).then(e=>{e.success&&(a.Vq.alert({content:"操作成功"}),m())})})}}],children:(0,r.jsx)(a.aV.Item,{extra:t.age,children:t.name})},t._id))})]})}},5738:function(e,t,n){"use strict";n.d(t,{C:function(){return i},T:function(){return a}});var r=n(6628);let a=r.I0,i=r.v9}},function(e){e.O(0,[996,628,253,488,744],function(){return e(e.s=1665)}),_N_E=e.O()}]);